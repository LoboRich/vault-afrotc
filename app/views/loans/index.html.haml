%section.section
  .section-header.d-mobile-none
    %h1 loans
    .section-header-breadcrumb
      .breadcrumb-item 
        = link_to 'Dashboard', '/'
      .breadcrumb-item
        List of loans
  .section-body
    .card
      .card-header
        %h4
          List of loans
        .card-header-action
          = link_to icon('fas fa-plus', 'New Loan'), new_loan_path, class: 'btn btn-icon icon-left btn-primary' 
          = render 'shared/card_dropdown' do 
            = link_to icon('fas fa-print', 'Print Page'), 'javascript:window.print()', class: 'dropdown-item has-icon' 
            = link_to icon('fas fa-download', 'Export Data'), loans_path(format: :xlsx, q: request.params[:q]), class: 'dropdown-item has-icon' 
      .card-body
        #loan_wrapper.dataTables_wrapper.container-fluid.dt-bootstrap4.no-footer
          .row
            .col-sm-12
              %table.table-responsive#loan_table.table.table-striped.dataTable.no-footer{"aria-describedby" => "loan_table_info", :role => "grid"}
                %thead
                  %tr.sorting{"aria-controls" => "loan_table", "aria-label" => "Action: activate to sort column ascending", :colspan => "1", :rowspan => "1", :style => "width: 66px;", :tabindex => "0"} 
                    %th Client
                    %th Blocklot
                    %th Terms
                    %th Model house
                    %th Loan financing
                    %th Contract price
                    %th Processing fees
                    %th Downpayment
                    %th Interest
                    %th Principal
                    %th Monthly amort
                    %th Contract date
                    %th Amortization start date
                    %th Balance
                    %th Remarks
                    %th Status
                    %th Broker
                    %th.sorting{"aria-controls" => "loan_table", "aria-label" => "Action: activate to sort column ascending", :colspan => "1", :rowspan => "1", :style => "width: 66px;", :tabindex => "0"} Action
                %tbody
                  - @loans.each do |loan|
                    %tr.odd{:role => "row"}     
                      %td= loan.client
                      %td= loan.blocklot
                      %td= loan.terms
                      %td= loan.model_house
                      %td= loan.loan_financing
                      %td= loan.contract_price
                      %td= loan.processing_fees
                      %td= loan.downpayment
                      %td= loan.interest
                      %td= loan.principal
                      %td= loan.monthly_amort
                      %td= loan.contract_date
                      %td= loan.amortization_start_date
                      %td= loan.balance
                      %td= loan.remarks
                      %td= loan.status
                      %td= loan.broker
                      %td
                        = link_to icon('fas fa-eye'), loan, title: 'Show it', class: 'btn btn-icon btn-sm btn-info mr-1'
                        = link_to icon('fas fa-edit'), edit_loan_path(loan), title: 'Edit it', class: 'btn btn-icon btn-sm btn-warning mr-1'
                        = link_to icon('fas fa-trash'), loan, title: 'Destroy it', class: 'btn btn-icon btn-sm btn-danger', method: :delete, data: { confirm: 'Are you sure?', remote: true }
:javascript
  $(document).ready( function () {
      $('#loan_table').DataTable();
  } );
  